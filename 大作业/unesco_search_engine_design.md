# UNESCO项目搜索引擎设计文档

## 1. 系统架构

### 1.1 整体架构

```
用户查询 → 查询处理层 → 检索层 → 排序层 → 结果展示层
   ↑                                   │
   └───────────── 反馈循环 ─────────────┘
```

### 1.2 核心组件

1. **数据预处理模块**
   - CSV数据加载和清洗
   - 文本规范化
   - 结构化数据处理

2. **索引构建模块**
   - 文本向量化索引
   - 关键词倒排索引
   - 元数据索引（按Sector、Region等）

3. **查询处理模块**
   - 查询解析和规范化
   - 口语化查询转写
   - 查询扩展和重写

4. **检索引擎模块**
   - 语义相似度搜索
   - 关键词匹配搜索
   - 混合检索策略

5. **结果排序模块**
   - 多因素排序算法
   - 相关度评分
   - 过滤和分页

6. **用户界面模块**
   - 命令行交互界面
   - 结果格式化输出

## 2. 技术选型

### 2.1 NLP模型选择

**主要模型：multilingual-MiniLM-L6-v2**

- **选择理由**：
  - 轻量级，推理速度快
  - 支持多语言（英文数据，中文查询）
  - 语义理解能力强，适合模糊匹配
  - 模型大小适中，便于部署

**备选模型**：
- sentence-transformers/all-MiniLM-L6-v2 (仅英文，性能更好)
- paraphrase-MiniLM-L6-v2 (同义句处理更强)

### 2.2 其他技术组件

- **数据处理**：Pandas (CSV处理)
- **NLP工具**：NLTK, spaCy (文本预处理)
- **向量存储**：NumPy (向量计算和存储)
- **界面**：Command-line interface (简单易用)
- **相似度计算**：余弦相似度

## 3. 实现策略

### 3.1 数据预处理策略

1. **文本清洗**：
   - 去除特殊字符和多余空格
   - 标准化大小写
   - 处理英文缩写和符号

2. **字段重要性权重**：
   - Project (标题): 高权重
   - Description (描述): 中高权重
   - Outcome EN, Output EN: 中权重
   - Sector, Regional Group: 类别过滤

### 3.2 检索策略

1. **混合检索**：
   - 语义搜索（主要）：计算查询向量与文档向量的相似度
   - 关键词搜索（辅助）：精确匹配重要术语
   - 类别过滤：利用Sector、Regional Group等元数据

2. **查询扩展**：
   - 同义词扩展
   - 常见口语表达转换为正式术语
   - 缩写展开

### 3.3 排序策略

1. **多因素评分**：
   - 语义相似度分数 (60%)
   - 关键词匹配度 (20%)
   - 元数据相关性 (10%)
   - 项目完整性和新近度 (10%)

2. **结果优化**：
   - 去重处理
   - 多样化结果（避免过度集中在某一类别）
   - 基于置信度的过滤

## 4. 部署和性能考量

### 4.1 索引优化

- 预处理向量存储，避免重复计算
- 批量处理和缓存机制
- 内存优化存储

### 4.2 响应时间目标

- 简单查询：< 1秒
- 复杂模糊查询：< 3秒
- 支持的并发用户：单用户（命令行）

## 5. 后续扩展方向

1. 添加交互式Web界面
2. 实现用户反馈和学习机制
3. 集成更先进的NLP模型（如BERT变体）
4. 添加可视化展示功能
5. 支持更复杂的查询语法和过滤器